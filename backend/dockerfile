# ใช้ Python base image (latest)
FROM python:latest-alpine

# คัดลอกไฟล์ requirements.txt
COPY requirements.txt .

# อัปเดต pip และติดตั้ง dependencies
RUN pip install --upgrade pip && pip install --no-cache-dir -r requirements.txt

# คัดลอกโค้ด Flask ทั้งหมดเข้า container
COPY . .

# Expose port 5000 for HTTPS Flask server
EXPOSE 5000

# ใช้ Flask run with HTTPS
CMD ["flask", "run", "--host=0.0.0.0", "--port=5000", "--cert=cert.pem", "--key=key.pem"]